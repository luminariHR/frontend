import{j as e,U as g,r as c,d as p,l as v,n as j}from"./index-BvEyhJvC.js";const b=({userItem:t})=>e.jsxs("div",{className:"flex items-center my-3 mx-3 relative",children:[e.jsx("div",{className:"rounded-full bg-gray-200 flex-shrink-0 overflow-hidden mr-4 w-12 h-12",children:e.jsx(g,{userProfileImg:t.profile_image,userName:t.name})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("div",{className:"font-bold",children:t.name}),e.jsx("div",{className:"text-gray-600",children:t.department?t.department.name:"알 수 없음"})]})]},t.id),N=({userData:t,isOpen:o,onSelect:n,onClose:i})=>{const[l,m]=c.useState(""),[d,h]=c.useState([]),f=p(v),u=l?d.filter(r=>r.name.toLowerCase().includes(l.toLowerCase())):d,x=r=>t.some(a=>a.id===r),s=r=>{x(r.id)||(n(r),m(""),i())};return c.useEffect(()=>{(async()=>{const a=await j();a&&h(a)})()},[]),o?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-75 z-20",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-1/3 h-[60%] overflow-hidden",children:[e.jsx("button",{onClick:i,className:"text-gray-600 hover:text-gray-900 float-right",children:"닫기"}),e.jsx("h2",{className:" text-xl mb-4 font-semibold",children:"결재권자 추가"}),e.jsx("input",{type:"text",placeholder:"이름을 적어주세요.",value:l,onChange:r=>m(r.target.value),className:"w-full p-2 border border-gray-300 rounded mb-4"}),e.jsx("div",{className:"h-[80%] overflow-y-auto hide-scrollbar",children:e.jsx("ul",{className:"",children:u.map((r,a)=>{if(f.id!=r.id)return e.jsx("li",{className:`p-2 border-b border-gray-300 ${x(r.id)||!r.department?"bg-gray-100 text-gray-500 cursor-not-allowed":"hover:bg-gray-200 cursor-pointer"}`,onClick:()=>s(r),children:e.jsx(b,{userItem:r})},a)})})})]})}):null},y=({data:t,setData:o,isEditable:n=!0})=>{const[i,l]=c.useState(!1),[m,d]=c.useState(null),h=p(v),f=s=>{if(h.id!=s.id){const r={id:s.id,name:s.name,department:s.department.name,profile_image:s.profile_image};o([...t,r])}},u=s=>{const r=t.filter(a=>a.id!==s);o(r)},x=s=>{s&&(d(s),l(!1),f(s),d(null))};return e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsx(N,{userData:t,isOpen:i,onSelect:x,onClose:()=>l(!1)}),e.jsx("h2",{className:"text-xl font-semibold mt-4 mb-1",children:"결재선"}),e.jsx("h3",{className:"text-m text-gray-500 mb-7",children:"아래 순서대로 결재가 요청됩니다."}),e.jsxs("div",{className:"relative mt-4",children:[t.map((s,r)=>e.jsxs("div",{className:"flex items-center mb-6 relative",children:[e.jsx("div",{className:"bg-gray-200 flex-shrink-0 overflow-hidden rounded-full mr-4 w-12 h-12",children:e.jsx(g,{userProfileImg:s.profile_image,userName:s.name})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("div",{className:"font-bold",children:s.name}),e.jsx("div",{className:"text-gray-600",children:s.department}),s.date&&e.jsx("div",{className:"text-gray-400 text-sm",children:s.date})]}),n&&e.jsx("div",{onClick:()=>u(s.id),className:"cursor-pointer flex-shrink-0 w-16 text-center py-1 rounded-full text-sm font-bold bg-red-500 text-white",children:"삭제"}),!n&&e.jsx("div",{className:"flex-shrink-0 w-16 text-center py-1 rounded-full text-sm font-bold bg-red-500 text-white",children:s.status})]},r)),n&&e.jsx("div",{className:"flex items-center mb-6 relative",children:e.jsx("button",{onClick:()=>l(!0),className:"bg-[#5d5bd4] hover:bg-[#5553c1] text-white font-bold py-2 px-4 rounded-full flex items-center justify-center w-12 h-12",children:"+"})})]})]})};export{y as A};
