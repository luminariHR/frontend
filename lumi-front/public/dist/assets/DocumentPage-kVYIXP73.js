import{y as _,r as t,j as e,i as H,B as i,_ as I,H as O,u as B,d as $,l as V,S as X,L as Z,C as G,I as J}from"./index-BvEyhJvC.js";import{T as K,a as Q,b as D,c as N,d as U,e as w}from"./table-D9qS8Jup.js";/* empty css                         */import{u as W}from"./index-CVyK_fVC.js";import{T as Y}from"./editor-DVdwRWap.js";import{C as ee}from"./select-DrmS5N3L.js";/**
 * @license lucide-react v0.401.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=_("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.401.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=_("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);function ae({onClose:h,onRequestSubmit:u}){const[p,g]=t.useState(!0),[o,f]=t.useState(""),[r,l]=t.useState(""),[b,j]=t.useState(!1),[n,d]=t.useState(null),[c,s]=t.useState(null),[x,v]=t.useState(!1),[M,S]=t.useState(!1),T=[{id:"onboarding_offboarding",name:"신규 입사자 가이드"},{id:"company_policies",name:"인사규정"},{id:"others",name:"기타"}],z=a=>{if(a.length>0){const m=a[0];d(m)}},{getRootProps:F,getInputProps:P,isDragActive:k}=W({onDrop:z,maxFiles:1}),A=a=>{l(a)},E=async()=>{const a=new FormData;a.append("name",o),a.append("description",r),n&&a.append("file",n),c&&a.append("category",c.id),S(!0);try{const m=await O(a);console.log("API 응답:",m),u(),h()}catch(m){console.error("문서 추가 중 에러 발생:",m)}finally{S(!1)}},L=()=>{v(!0)},R=async()=>{v(!1),await E()},q=()=>{v(!1)},y=()=>o&&r&&c;return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",children:e.jsxs("div",{className:`relative flex bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300 ${p?"w-11/12 max-w-6xl":"w-11/12 max-w-4xl"} h-[90%]`,children:[e.jsx("div",{className:"flex flex-row w-full h-full",children:e.jsx("div",{className:"flex-grow p-8 overflow-auto",children:e.jsxs("div",{className:"overflow-y-auto max-h-full h-full flex flex-col justify-between hide-scrollbar",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h2",{className:"text-xl font-semibold",children:"자료 추가하기"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-l font-semibold mb-2",children:"제목"}),e.jsx("div",{children:e.jsx("input",{id:"title",type:"text",value:o,placeholder:"자료 제목을 적어주세요.",onChange:a=>f(a.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 mb-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-l font-semibold mb-2",children:"카테고리"}),e.jsx("div",{children:e.jsx(ee,{onSelect:a=>s(a),options:T,selectedOption:c,defaultText:"카테고리를 선택해주세요"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-l font-semibold",children:"파일 첨부"}),e.jsx("div",{className:"bg-gray-100 p-5 my-5 rounded-lg",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[!n&&e.jsxs("div",{...F(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer ${k?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50"}`,children:[e.jsx("input",{...P()}),k?e.jsx("p",{className:"text-blue-500",children:"파일을 여기에 드랍해주세요."}):e.jsx("p",{className:"text-gray-500",children:"Drag & drop a file here, or click to select a file"})]}),n&&e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-4 bg-white p-4 rounded-lg shadow-md",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:`https://img.icons8.com/color/48/000000/${n.type}.png`,alt:"doc",className:"w-6 h-6"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:n.name})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>d(null),children:e.jsx(H,{})})]})})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-l font-semibold mb-3",children:"문서 양식"}),e.jsx(Y,{value:r,onChange:A})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"mx-1",children:e.jsx(i,{text:"취소",onClick:h})}),e.jsxs("div",{className:"mx-1",onMouseEnter:()=>!y()&&j(!0),onMouseLeave:()=>j(!1),children:[y()?e.jsx(i,{text:"데이터 추가",variant:"teams",type:"button",onClick:L,leftIcon:e.jsx(C,{})}):e.jsx(i,{text:"데이터 추가",variant:"teams",type:"button",disabled:!0,leftIcon:e.jsx(C,{})}),!y()&&b&&e.jsx("div",{className:"absolute left-[50%] bottom-20 transform -translate-x-1/2 mt-2 px-3 py-1 text-sm text-white bg-gray-700 rounded shadow-lg",children:"제목, 카테고리, 내용 등을 추가해주세요."})]})]})]})})}),x&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-20",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"추가 확인"}),e.jsx("p",{children:"정말로 데이터를 추가하시겠습니까?"}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(i,{text:"취소",onClick:q,addClass:"mr-2"}),e.jsx(i,{text:"확인",variant:"teams",onClick:R})]})]})}),M&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsx(I,{color:"#5d5bd4",size:70,"aria-label":"Saving Spinner","data-testid":"loader"})})]})})}function re(){const[h,u]=t.useState([]),[p,g]=t.useState(!1),[o,f]=t.useState(!0),r=B(),l=$(V),b=s=>{r(`/document/details/${s}`)},j=()=>g(!0),n=()=>{g(!1),d()},d=async()=>{f(!0);try{const s=await J();console.log("Fetched data:",s),Array.isArray(s)?u(s):console.error("API 응답이 배열이 아닙니다.")}catch(s){console.error("데이터 로드 중 에러 발생",s)}finally{f(!1)}};t.useEffect(()=>{d()},[]);const c=s=>{const x=document.createElement("a");x.href=s,x.download=s.split("/").pop(),x.click()};return e.jsx(X,{children:e.jsxs(Z,{children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[e.jsxs("h2",{children:[e.jsx("span",{className:"text-[#8a8686]",children:"메인 >"})," ",e.jsxs("span",{className:"font-semibold text-[#20243f]",children:[" ",l?"자료실":(l==null?void 0:l.is_hr_admin)&&"자료실 관리"]})]}),e.jsxs("h2",{className:"flex",children:[e.jsx("span",{children:e.jsx(G,{className:"text-gray-500 h-[20px]"})}),e.jsx("span",{className:"text-gray-500 ml-2 text-[14px]",children:"업무 외 개인정보 이용 금지"})]})]}),e.jsx("div",{className:"flex items-center justify-end mx-16",children:(l==null?void 0:l.is_hr_admin)&&e.jsx(e.Fragment,{children:e.jsx(i,{text:"자료실 데이터 추가하기",variant:"teams",leftIcon:e.jsx(C,{}),addClass:"font-semibold",onClick:j})})})]}),e.jsxs("div",{className:"mx-16",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:p&&e.jsx(ae,{onClose:n,onRequestSubmit:u})}),e.jsx("div",{className:"transition duration-300 ease-in-out",children:e.jsx("div",{className:"overflow-auto rounded-lg",children:o?e.jsx("div",{className:"flex w-full justify-center items-center m-auto w-1/2 p-8",children:e.jsx(I,{color:"#5d5bd4",loading:o,size:50,"aria-label":"Loading Spinner","data-testid":"loader"})}):e.jsxs(K,{children:[e.jsx(Q,{children:e.jsxs(D,{children:[e.jsx(N,{children:"제목"}),e.jsx(N,{children:"카테고리"}),e.jsx(N,{})]})}),e.jsx(U,{children:h.map(s=>e.jsxs(D,{addClass:"hover:bg-gray-100 cursor-pointer",onClick:()=>b(s.id),children:[e.jsx(w,{children:s.name}),e.jsx(w,{children:s.category==="onboarding_offboarding"?"신규 입사자 가이드":s.category==="company_policies"?"인사규정":"기타"}),e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(e.Fragment,{children:e.jsx(i,{variant:"default",size:"sm",text:"데이터 원본 다운로드",leftIcon:e.jsx(se,{className:"h-4 w-4"}),addClass:"mr-2",onClick:()=>c(s.file)})})})})]},s.id))})]})})})]})]})})}export{re as default};
