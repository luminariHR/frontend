import{r as t,j as e,S as D,L as N,C as k,B as v,_ as S}from"./index-BvEyhJvC.js";import{I as h}from"./input-D1N2lLD0.js";import{T as C,a as T,b as j,c as r,d as M,e as n}from"./table-D9qS8Jup.js";import{D as m}from"./index-DN_9uyhM.js";/* empty css                         */import{f}from"./attendanceApi-B3UmLx3w.js";import{C as p}from"./calendar-days-cSX7vrBg.js";import"./startOfMonth-HAbtygMl.js";function z(){const[A,y]=t.useState(new Date),[d,b]=t.useState(new Date),[o,w]=t.useState(new Date),[c,i]=t.useState(null),[x,_]=t.useState(!0),g=async()=>{const s=d.toISOString().split("T")[0],a=o.toISOString().split("T")[0],l=await f(s,a);l&&i(l.data)};t.useEffect(()=>{(async()=>{const a=await f();a&&i(a.data),_(!1)})()},[]),t.useEffect(()=>{let s;const a=()=>{y(new Date),s=requestAnimationFrame(a)};return s=requestAnimationFrame(a),()=>cancelAnimationFrame(s)},[]);const u=s=>{const a=new Date;a.setHours(0,0,0,0);const l=new Date(s);return l.setHours(0,0,0,0),l.getTime()===a.getTime()?"today-selected":""};return e.jsx(D,{children:e.jsxs(N,{children:[e.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[e.jsxs("h2",{children:[e.jsx("span",{className:"text-[#8a8686]",children:"메인 > 근태 관리 >"})," ",e.jsx("span",{className:"font-semibold text-[#20243f]",children:"내 근태 관리"})]}),e.jsxs("h2",{className:"flex",children:[e.jsx("span",{children:e.jsx(k,{className:"text-gray-500 h-[20px]"})}),e.jsx("span",{className:"text-gray-500 ml-2 text-[14px]",children:"업무 외 개인정보 이용 금지"})]})]}),e.jsxs("div",{className:"mx-16",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex p-2 border rounded bg-white",children:[e.jsx(m,{selected:d,onChange:s=>b(s),dateFormat:"yyyy-MM-dd",className:"outline-none cursor-pointer caret-transparent",dayClassName:u}),e.jsx(p,{})]}),e.jsxs("label",{className:"flex p-2 border rounded bg-white",children:[e.jsx(m,{selected:o,onChange:s=>w(s),dateFormat:"yyyy-MM-dd",className:"outline-none cursor-pointer caret-transparent",dayClassName:u}),e.jsx(p,{})]}),e.jsx("div",{children:e.jsx(v,{text:"검색",size:"md",variant:"primary",onClick:g})})]})}),e.jsx("div",{className:"overflow-auto rounded-lg ",children:x?e.jsx("div",{className:"flex w-full justify-center items-center m-auto w-1/2 p-8",children:e.jsx(S,{color:"#5d5bd4",loading:x,size:50,"aria-label":"Loading Spinner","data-testid":"loader"})}):e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs(j,{children:[e.jsx(r,{children:"날짜"}),e.jsx(r,{children:"상태"}),e.jsx(r,{children:"출근 시각"}),e.jsx(r,{children:"퇴근 시각"}),e.jsx(r,{children:"근무 시간"}),e.jsx(r,{children:"특이사항"})]})}),e.jsx(M,{children:c&&c.length>0?c.map(s=>e.jsxs(j,{children:[e.jsx(n,{children:s.date?s.date:"-"}),e.jsx(n,{children:s.is_late===!0?"지각":s.is_early_leave===!0?"조퇴":"-"}),e.jsx(n,{children:e.jsx(h,{value:s.clock_in?s.clock_in.split("T")[1].slice(0,8):"",disabled:!0})}),e.jsx(n,{children:e.jsx(h,{value:s.clock_out?s.clock_out.split("T")[1].slice(0,8):"",disabled:!0})}),e.jsx(n,{children:s.hours_worked?`${Math.floor(s.hours_worked)}시간 ${Math.round((s.hours_worked-Math.floor(s.hours_worked))*60)}분`:"-"}),e.jsx(n,{addClass:"truncate",children:s.clock_out_note?s.clock_out_note.length>30?s.clock_out_note.slice(0,30)+"...":s.clock_out_note:"-"})]},s.id)):e.jsx("div",{className:"bg-white p-8 text-gray-500",children:"해당 기간 동안의 근태 기록이 없습니다."})})]})})]})]})})}export{z as default};
