import{k as b,r as n,u as y,j as e,S as c,L as m,_ as w,B as o,U as D}from"./index-BvEyhJvC.js";import{D as j}from"./index-DN_9uyhM.js";import{d as k,e as O}from"./ptoApi-B4Hepo3o.js";import{T as P}from"./editor-DVdwRWap.js";import"./startOfMonth-HAbtygMl.js";function F(){const{id:i}=b(),[s,u]=n.useState(null),[l,N]=n.useState(""),[p,d]=n.useState(!0),x=y();n.useEffect(()=>{(async()=>{const a=await k(i);if(a&&(u(a),a.file)){const t=new URL(a.file).pathname,g=t.substring(t.lastIndexOf("/")+1);N(g)}d(!1)})()},[i]);const v=()=>{x(-1)},h=async r=>{d(!0);const a=await O(i,r);a&&(alert(a.message),x("vacation/request")),d(!1)},f=r=>{const a=new Date;a.setHours(0,0,0,0);const t=new Date(r);return t.setHours(0,0,0,0),t.getTime()===a.getTime()?"today-selected":""};return p?e.jsx(c,{children:e.jsx(m,{children:e.jsx("div",{className:"flex w-full justify-center items-center m-auto w-1/2 h-full p-72",children:e.jsx(w,{color:"#5d5bd4",size:70,"aria-label":"Loading Spinner","data-testid":"loader"})})})}):s?e.jsx(c,{children:e.jsx(m,{children:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",children:e.jsx("div",{className:"relative flex bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300 w-11/12 max-w-4xl h-[90%]",children:e.jsx("div",{className:"flex flex-row w-full h-full",children:e.jsx("div",{className:"flex-grow p-8 overflow-auto ",children:e.jsxs("div",{className:"overflow-y-auto max-h-full h-full flex flex-col justify-between hide-scrollbar",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"휴가 신청"}),e.jsx("div",{className:"mx-1",children:e.jsx(o,{text:"뒤로가기",onClick:v})})]}),e.jsxs("div",{className:"mb-5 h-auto",children:[e.jsxs("div",{className:"flex flex-col mb-5",children:[e.jsx("h3",{className:"text-l font-semibold mr-1",children:e.jsx("span",{className:"mr-1",children:"신청자"})}),e.jsxs("div",{className:"w-max flex items-center p-4 border rounded bg-white my-3",children:[e.jsx("div",{className:"h-8 w-8 mr-3",children:e.jsx(D,{userProfileImg:s.employee.profile_image,userName:s.employee.name})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-l mr-2",children:s.employee.name}),e.jsxs("div",{className:"font-normal text-xs text-gray-400",children:[e.jsx("span",{className:"mr-1",children:s.employee.job_title}),e.jsx("span",{className:"mr-1",children:"·"}),e.jsx("span",{className:"mr-1",children:s.employee.department.name})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-l font-semibold",children:"날짜"}),e.jsx("div",{className:"my-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"flex p-2 border rounded",children:e.jsx(j,{readOnly:!0,selected:new Date(s.start_date),dateFormat:"yyyy-MM-dd",className:"outline-none cursor-default caret-transparent",dayClassName:f})}),e.jsx("span",{className:"mx-1 font-semibold",children:"~"}),e.jsx("label",{className:"flex p-2 border rounded  cursor-default",children:e.jsx(j,{readOnly:!0,selected:new Date(s.end_date),dateFormat:"yyyy-MM-dd",className:"outline-none cursor-default caret-transparent",dayClassName:f})})]})})]})]}),(s==null?void 0:s.file)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-l font-semibold mt-1",children:"파일 첨부"}),e.jsx("div",{className:"bg-gray-100 p-5 mt-5 mb-8 rounded-lg",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsx("div",{children:e.jsxs("a",{className:"flex items-center space-x-4 bg-white p-4 rounded-lg shadow-md",href:s.file,download:s.file,target:"_blank",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:`https://img.icons8.com/color/48/000000/${l.substring(l.lastIndexOf(".")+1)==="jpeg"?"jpg":l.substring(l.lastIndexOf(".")+1)}.png`,alt:"doc",className:"w-6 h-6"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:decodeURIComponent(l)})}),e.jsx("div",{className:"cursor-pointer"})]})})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-l font-semibold mb-3",children:e.jsx("span",{className:"mr-2",children:"상세 내용"})}),e.jsx(P,{value:s.message,readOnly:!0,modules:{toolbar:!1}})]}),e.jsx("div",{className:"flex items-center justify-center",children:s.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-1",children:e.jsx(o,{text:"반려",onClick:()=>h("rejected")})}),e.jsx("div",{className:"mx-1",children:e.jsx(o,{text:"승인",variant:"teams",type:"submit",onClick:()=>h("approved")})})]}):e.jsx("div",{className:"mx-1"})})]})})})})})})}):e.jsx(c,{children:e.jsx(m,{children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:"데이터를 불러오지 못했습니다."})})})}export{F as default};
