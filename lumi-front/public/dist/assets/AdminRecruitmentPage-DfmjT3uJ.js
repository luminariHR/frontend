import{y as M,r as i,j as e,B as f,A as P,u as L,S as T,L as B,C as Q,_ as V}from"./index-BvEyhJvC.js";import{C as q}from"./select-DrmS5N3L.js";import{c as H,u as U,f as W,a as S}from"./recruitmentApi-Bm-QUMlW.js";import{I as g}from"./input-D1N2lLD0.js";import{T as R}from"./editor-DVdwRWap.js";import{S as $}from"./pill-DWlxmmr_.js";/**
 * @license lucide-react v0.401.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=M("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.401.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=M("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);function J({isOpen:N,onClose:d,onCreated:n}){const[j,r]=i.useState(""),[o,u]=i.useState({title:"",description:"",position:"",questions:[{question_text:"",max_length:500}]}),p=t=>{const{name:a,value:m}=t.target;u(h=>({...h,[a]:m}))},c=t=>{r(t)},x=(t,a,m)=>{const h=o.questions.map((v,k)=>t===k?{...v,[a]:m}:v);u(v=>({...v,questions:h}))},y=()=>{u(t=>({...t,questions:[...t.questions,{question_text:"",max_length:500}]}))},w=t=>{u(a=>({...a,questions:a.questions.filter((m,h)=>h!==t)}))},C=async()=>{try{const t={...o,description:j},a=await H(t);alert("채용 공고가 성공적으로 생성되었습니다."),n(a),d()}catch(t){console.error("Error creating recruitment posting:",t),alert("채용 공고 생성 중 오류가 발생했습니다.")}};return N?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",children:e.jsx("div",{className:"relative flex bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300 w-11/12 max-w-4xl h-[90%]",children:e.jsx("div",{className:"flex flex-row w-full h-full",children:e.jsxs("div",{className:"flex-grow p-8 overflow-y-auto hide-scrollbar",children:[e.jsx("div",{className:"flex justify-between pb-3",children:e.jsx("div",{className:"text-xl font-medium",children:"채용 공고 생성"})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"제목"}),e.jsx(g,{name:"title",value:o.title,onChange:p,addClass:"w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"직무명"}),e.jsx(g,{name:"position",value:o.position,onChange:p,addClass:"w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"상세 내용"}),e.jsx(R,{value:j,onChange:c})]}),o.questions.map((t,a)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:"block font-medium mr-2",children:["문항 ",a+1]}),e.jsx("div",{className:"text-gray-500 cursor-pointer",onClick:()=>w(a),children:e.jsx(F,{strokeWidth:1,className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"block font-medium mr-2",children:"최대 글자 수"}),e.jsx(g,{name:"max_length",type:"number",value:t.max_length,onChange:m=>x(a,"max_length",m.target.value),addClass:"w-[80px] text-xs"})]})]}),e.jsx(g,{name:"question_text",value:t.question_text,onChange:m=>x(a,"question_text",m.target.value),addClass:"w-full text-sm"})]},a)),e.jsx(f,{text:"문항 추가하기",block:!0,leftIcon:e.jsx(P,{}),onClick:y}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[e.jsx(f,{text:"취소",onClick:d}),e.jsx(f,{text:"생성하기",variant:"primary",onClick:C})]})]})]})})})}):null}const _=[{id:"pre_open",name:"준비 중"},{id:"open",name:"진행 중"},{id:"closed",name:"마감"}];function K({isOpen:N,onClose:d,data:n,onStatusUpdate:j}){const[r,o]=i.useState(null);i.useEffect(()=>{if(n){const c=_.find(x=>x.id===n.status);o(c)}},[n]);const u=c=>{o(c)},p=async()=>{try{await U(n.id,r.id),alert("상태가 성공적으로 업데이트되었습니다."),j({...n,status:r.id}),d()}catch(c){console.error("Error updating status:",c),alert("상태 업데이트 중 오류가 발생했습니다.")}};return!N||!n?null:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",children:e.jsx("div",{className:"relative flex bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300 w-11/12 max-w-4xl h-[90%]",children:e.jsx("div",{className:"flex flex-col w-full h-full",children:e.jsxs("div",{className:"flex flex-col p-8 overflow-y-auto hide-scrollbar",children:[e.jsxs("div",{className:"flex justify-between pb-3",children:[e.jsx("div",{className:"text-xl font-medium",children:"채용 공고"}),e.jsx(f,{text:"뒤로가기",onClick:d})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"상태"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-[225px]",children:e.jsx(q,{options:_,selectedOption:r,onSelect:u,defaultText:"상태를 선택하세요"})}),e.jsx(f,{text:"상태 업데이트",variant:"teams",onClick:p,addClass:"ml-4"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"제목"}),e.jsx(g,{name:"title",value:n.title,addClass:"w-full text-sm",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"직무명"}),e.jsx(g,{name:"position",value:n.position,addClass:"w-full text-sm",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"상세 내용"}),e.jsx(R,{value:n.description,readOnly:!0})]}),e.jsx("div",{className:"mb-4",children:n.questions.map((c,x)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"block font-medium mb-1",children:["문항 ",x+1]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 mr-1",children:["최대 글자 수 : ",c.max_length]})]}),e.jsx("div",{className:"p-2 border rounded text-sm",children:c.question_text})]},x))})]})]})})})})}function le(){const N=L();i.useState(new Date);const[d,n]=i.useState([]),[j,r]=i.useState(null),[o,u]=i.useState(null),[p,c]=i.useState([]),[x,y]=i.useState(!0),[w,C]=i.useState(null),[t,a]=i.useState(!1),[m,h]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const l=await W();if(n(l),l.length>0){r(l[0]),u({id:l[0].id,name:l[0].title});const b=await S(l[0].id);c(b)}}catch(l){C(l)}finally{y(!1)}})()},[]);const v=()=>{a(!1)},k=()=>{a(!0)},E=()=>{h(!1),r(null)},I=s=>{r(s),h(!0)},O=s=>{n(l=>[...l,s])},A=async s=>{const l=d.find(D=>D.id===s.id);u(s),r(l);const b=await S(l.id);c(b)},z=s=>{n(l=>l.map(b=>b.id===s.id?s:b)),r(s)};return w?e.jsxs("div",{children:["Error: ",w.message]}):e.jsxs(T,{children:[e.jsxs(B,{children:[e.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[e.jsxs("h2",{children:[e.jsx("span",{className:"text-[#8a8686]",children:"메인 >"})," ",e.jsx("span",{className:"font-semibold text-[#20243f]",children:"채용 관리"})]}),e.jsxs("h2",{className:"flex",children:[e.jsx("span",{children:e.jsx(Q,{className:"text-gray-500 h-[20px]"})}),e.jsx("span",{className:"text-gray-500 ml-2 text-[14px]",children:"업무 외 개인정보 이용 금지"})]})]}),x?e.jsx("div",{className:"flex w-full justify-center items-center m-auto w-1/2 p-8",children:e.jsx(V,{color:"#5d5bd4",loading:x,size:50,"aria-label":"Loading Spinner","data-testid":"loader"})}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex mb-6",children:[e.jsxs("div",{className:"w-[300px] mr-6 p-5 bg-white shadow rounded-lg",children:[e.jsx("div",{className:"flex h-8 text-xs items-center justify-between",children:e.jsx("span",{className:"",children:"진행 중인 채용 공고"})}),e.jsxs("div",{className:"flex items-center gap-4 font-semibold ",children:[d.filter(s=>s.status==="open").length,"건"]})]}),e.jsxs("div",{className:"w-[300px] mr-6 p-5 bg-white shadow rounded-lg",children:[e.jsx("div",{className:"flex h-8 text-xs items-center justify-between",children:e.jsx("span",{className:"",children:"총 지원자 수"})}),e.jsxs("div",{className:"flex items-center gap-4 font-semibold ",children:[d.reduce((s,l)=>s+l.number_of_applicants,0),"명"]})]})]}),e.jsxs("div",{className:"flex bg-white shadow h-[630px] rounded-lg mb-10",children:[e.jsx("div",{className:"py-6 pl-6 w-[50%] h-full",children:e.jsx("div",{className:"h-full border-r",children:e.jsxs("div",{className:"pr-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 overflow-y-auto hide-scrollbar",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"채용 공고"}),e.jsx(f,{size:"sm",leftIcon:e.jsx(P,{className:"h-4 w-4"}),text:"추가하기",onClick:k})]}),e.jsx("div",{className:"",children:d.length?d.map(s=>e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col justify-between mb-6 bg-white overflow-hidden border rounded-lg p-6",children:[e.jsx("div",{className:"font-semibold text-lg mb-1",children:s.title}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:`지원자 수 : ${s.number_of_applicants}명`})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{status:s.status==="open"?"success":s.status==="pre_open"?"pending":"default",size:"sm",text:s.status==="open"?"진행 중":s.status==="pre_open"?"준비 중":"마감"}),e.jsx(f,{variant:"default",size:"sm",text:"상세보기",onClick:()=>I(s),addClass:"ml-2"})]})]})},s.id)):e.jsx("div",{children:"등록된 채용공고가 없습니다."})})]})})}),e.jsxs("div",{className:"p-6 w-[50%] h-full overflow-y-auto hide-scrollbar",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-sm font-semibold mb-4",children:"지원자 현황"}),e.jsx("div",{className:"mb-4",children:e.jsx(q,{options:d.map(s=>({id:s.id,name:s.title})),selectedOption:o,onSelect:A,defaultText:"전체 직무"})})]}),e.jsx("div",{children:p.length?p.map((s,l)=>e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col justify-between border rounded-lg mb-6 bg-white overflow-hidden p-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"mr-2 font-semibold",children:s.applicant_name}),e.jsxs("div",{className:"text-xs text-gray-400",children:[e.jsx("p",{children:s.applicant_email}),e.jsx("p",{children:s.applicant_phone_number})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(f,{variant:"teams",size:"sm",leftIcon:e.jsx(G,{className:"h-4 w-4"}),text:"AI 분석 결과",onClick:()=>N(`/admin/recruitment/analysis/${j.id}/${s.applicant_email}`)})})]})},l)):e.jsx("div",{className:"my-10 mx-5",children:"아직 지원자가 없습니다."})})]})]})]})]}),e.jsx(J,{isOpen:t,onClose:v,onCreated:O}),e.jsx(K,{isOpen:m,onClose:E,data:j,onStatusUpdate:z})]})}export{le as default};
