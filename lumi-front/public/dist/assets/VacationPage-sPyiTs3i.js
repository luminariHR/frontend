import{r as a,j as e,i as E,B as T,u as O,S as I,L,C as R,_ as F}from"./index-BvEyhJvC.js";/* empty css                         */import{S as b}from"./pill-DWlxmmr_.js";import{T as V,a as $,b as k,c as g,d as A,e as y}from"./table-D9qS8Jup.js";import{u as B}from"./index-CVyK_fVC.js";import{T as H}from"./editor-DVdwRWap.js";import{D as q}from"./index-DN_9uyhM.js";import{r as Z,f as J}from"./ptoApi-B4Hepo3o.js";import{C as M}from"./calendar-days-cSX7vrBg.js";import{v as Q}from"./vacation-C6UYX8Dg.js";import"./startOfMonth-HAbtygMl.js";const X="/assets/emoji_pill_-k1VeZozh.png",Y="/assets/emoji_baby_-CEN1xl46.png",G="/assets/emoji_family_-Bnwffh9m.png",K="/assets/emoji_baby_bottle_-CeP6S3du.png",U="/assets/emoji_musical_keyboard_-7s-AZZZi.png",W="/assets/emoji_beach_with_umbrella_-DSyqakdL.png",ee="/assets/emoji_party_popper_-DbFt4DL6.png",se="/assets/emoji_person_in_bed_-CLYTQgJJ.png";function te({onClose:x,category:o,onRequestSubmit:_}){const[m,v]=a.useState(new Date),[d,r]=a.useState(new Date),[c,u]=a.useState(""),[l,h]=a.useState(null),N=t=>{if(t.length>0){const n=t[0];h(n)}},{getRootProps:w,getInputProps:D,isDragActive:j}=B({onDrop:N,maxFiles:1}),C=t=>{u(t)},S=async()=>{const t=new FormData;t.append("pto_type",o.category),t.append("message",c),t.append("start_date",m.toISOString().split("T")[0]),t.append("end_date",d.toISOString().split("T")[0]),l&&t.append("file",l),await Z(t)&&_("sent"),x()},p=t=>{const n=new Date;n.setHours(0,0,0,0);const f=new Date(t);return f.setHours(0,0,0,0),f.getTime()===n.getTime()?"today-selected":""};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",children:e.jsx("div",{className:"relative flex bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300 w-11/12 max-w-4xl h-[90%]",children:e.jsx("div",{className:"flex flex-row w-full h-full",children:e.jsx("div",{className:"flex-grow p-8 overflow-auto ",children:e.jsxs("div",{className:"overflow-y-auto max-h-full h-full flex flex-col justify-between hide-scrollbar",children:[e.jsx("div",{className:"flex justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-semibold",children:[o.label," 신청하기"]})}),e.jsxs("div",{className:"mb-5",children:[e.jsx("h3",{className:"text-l font-semibold",children:"날짜 선택"}),e.jsx("div",{className:"my-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex p-2 border rounded bg-white cursor-pointer",children:[e.jsx(q,{selected:m,onChange:t=>v(t),dateFormat:"yyyy-MM-dd",className:"outline-none cursor-pointer caret-transparent",dayClassName:p}),e.jsx(M,{})]}),e.jsx("span",{className:"mx-1 font-semibold",children:"~"}),e.jsxs("label",{className:"flex p-2 border rounded bg-white cursor-pointer",children:[e.jsx(q,{selected:d,onChange:t=>r(t),dateFormat:"yyyy-MM-dd",className:"outline-none cursor-pointer caret-transparent",dayClassName:p}),e.jsx(M,{})]})]})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-l font-semibold",children:"파일 첨부"}),e.jsx("div",{className:"bg-gray-100 p-5 my-3 rounded-lg",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[!l&&e.jsxs("div",{...w(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer ${j?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50"}`,children:[e.jsx("input",{...D()}),j?e.jsx("p",{className:"text-blue-500",children:"파일을 여기에 드랍해주세요."}):e.jsx("p",{className:"text-gray-500",children:"Drag & drop a file here, or click to select a file"})]}),l&&e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-4 bg-white p-4 rounded-lg shadow-md",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:`https://img.icons8.com/color/48/000000/${l.type==="image/jpeg"?"image/jpg":l.type}.png`,alt:"doc",className:"w-6 h-6"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:l.name})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>h(null),children:e.jsx(E,{})})]})})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-l font-semibold mb-3",children:[e.jsx("span",{className:"mr-2",children:"상세 내용"}),e.jsx("span",{className:"font-normal text-xs text-gray-500",children:"필요시 작성해주세요."})]}),e.jsx(H,{value:c,onChange:C})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"mx-1",children:e.jsx(T,{text:"취소",onClick:x})}),e.jsx("div",{className:"mx-1",children:e.jsx(T,{text:"휴가 신청하기",variant:"teams",type:"submit",onClick:S})})]})]})})})})})}function pe(){const[x,o]=a.useState([]),[_,m]=a.useState(0),[v,d]=a.useState(!1),[r,c]=a.useState("status"),[u,l]=a.useState(!0),[h,N]=a.useState(""),w=O(),D=[{id:"status",label:"휴가 신청하기"},{id:"sent",label:"휴가 신청 현황"}],j=[{id:1,label:"연차",category:"default",emoji:W,days_left:3,request_first:!1},{id:2,label:"병가",category:"sick_leave",emoji:X,days_left:null,request_first:!0},{id:3,label:"리프레시 휴가",category:"refresh_leave",emoji:ee,days_left:null,request_first:!0},{id:4,label:"생리 휴가",category:"menstrual_period_leave",emoji:se,days_left:null,request_first:!0},{id:5,label:"출산 휴가",category:"maternity_leave",emoji:Y,days_left:null,request_first:!0},{id:6,label:"배우자 출산 휴가",category:"paternity_leave",emoji:K,days_left:null,request_first:!0},{id:7,label:"가족 돌봄 휴가",category:"family_care",emoji:G,days_left:null,request_first:!0},{id:8,label:"기타",category:"others",emoji:U,days_left:null,request_first:!0}],C=()=>d(!0),S=()=>d(!1),p=s=>{w(`/vacation/${s}`)},t=s=>{switch(s){case"approved":return e.jsx(b,{status:"success",size:"sm",text:"승인"});case"pending":return e.jsx(b,{status:"pending",size:"sm",text:"검토 중"});case"rejected":return e.jsx(b,{status:"alert",size:"sm",text:"반려"});default:return e.jsx(b,{status:"default",size:"sm",text:"알 수 없음"})}};a.useEffect(()=>{(async()=>{o([]);let i;i=await J(),i&&(o(i.records),m(i.default_pto_left)),l(!1)})()},[r]);const n=s=>{N(s),C()},f=(s,i)=>{const P=new Date(s),z=(new Date(i)-P)/(1e3*60*60*24);return Math.round(z)};return e.jsx(I,{children:e.jsxs(L,{children:[e.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[e.jsxs("h2",{children:[e.jsx("span",{className:"text-[#8a8686]",children:"메인 > 근태 관리 >"})," ",e.jsx("span",{className:"font-semibold text-[#20243f]",children:"내 휴가 관리"})]}),e.jsxs("h2",{className:"flex",children:[e.jsx("span",{children:e.jsx(R,{className:"text-gray-500 h-[20px]"})}),e.jsx("span",{className:"text-gray-500 ml-2 text-[14px]",children:"업무 외 개인정보 이용 금지"})]})]}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"flex justify-evenly space-x-4 bg-white py-2.5 px-5 rounded-full mb-4",children:D.map(s=>e.jsx("div",{onClick:()=>{l(!0),c(s.id)},className:`cursor-pointer px-4 py-2 rounded-full transition duration-300 ease-in-out ${r===s.id?"bg-[#5d5bd4] text-white shadow-md font-medium":"bg-white text-gray-600 font-medium"}`,children:e.jsxs("div",{className:"flex items-center",children:[s.label,s.count&&e.jsx("span",{className:`ml-2 rounded-full px-2 py-1 text-xs transition duration-300 ease-in-out ${r===s.id?"bg-yellow-500 text-white":"bg-yellow-100 text-yellow-500"}`,children:s.count})]})},s.id))})}),e.jsxs("div",{className:"mx-16",children:[e.jsx("div",{className:"flex items-center justify-between",children:v&&e.jsx(te,{onClose:S,category:h,onRequestSubmit:c})}),e.jsx("div",{className:"transition duration-300 ease-in-out",children:e.jsx("div",{className:"overflow-auto rounded-lg",children:u?e.jsx("div",{className:"flex w-full justify-center items-center m-auto w-1/2 p-8",children:e.jsx(F,{color:"#5d5bd4",loading:u,size:50,"aria-label":"Loading Spinner","data-testid":"loader"})}):r==="sent"?e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(k,{children:[e.jsx(g,{children:"상태"}),e.jsx(g,{children:"휴가 종류"}),e.jsx(g,{children:"승인권자"}),e.jsx(g,{children:"기간"})]})}),e.jsx(A,{children:x.map(s=>e.jsxs(k,{addClass:"hover:bg-gray-100 cursor-pointer",onClick:()=>p(s.id),children:[e.jsx(y,{children:t(s.status)}),e.jsx(y,{children:Q[s.pto_type]}),e.jsx(y,{children:s.authorizer.name}),e.jsxs(y,{children:[e.jsx("span",{children:s.start_date?s.start_date:"-"}),e.jsx("span",{children:" ~ "}),e.jsx("span",{children:s.end_date?s.end_date:"-"}),e.jsx("span",{children:` (${f(s.start_date,s.end_date)+1}일)`})]})]},s.id))})]}):e.jsx("div",{children:e.jsx("div",{className:"w-full bg-white h-[450px] rounded-lg p-10 pb-20 grid grid-cols-4 gap-4",children:j.map(s=>e.jsxs("div",{className:"h-auto border border-gray-200 rounded-md flex flex-col justify-between hover:shadow-xl pt-6 pb-4 px-4 cursor-pointer",onClick:()=>{n(s)},children:[e.jsx("div",{className:"",children:e.jsx("img",{src:s.emoji,alt:"vacation_emoji",className:"w-5 h-auto"})}),e.jsxs("div",{className:"font-semibold text-gray-500",children:[e.jsx("div",{className:"text-sm",children:s.label}),s.days_left&&e.jsxs("span",{children:[_,"일"]}),s.request_first&&e.jsx("span",{children:"신청시 지급"})]})]},s.id))})})})})]})]})})}export{pe as default};
