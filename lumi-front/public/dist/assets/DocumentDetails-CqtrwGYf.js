import{y as A,k as K,u as O,r as l,d as V,l as X,j as e,S as w,L as D,_ as S,B as n,i as Z,K as G,N as J}from"./index-BvEyhJvC.js";import{T as Q}from"./editor-DVdwRWap.js";import{u as W}from"./index-CVyK_fVC.js";import"./select-DrmS5N3L.js";import{I as _}from"./input-D1N2lLD0.js";/**
 * @license lucide-react v0.401.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=A("FileMinus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}]]);function ne(){const{id:d}=K(),o=O(),[i,C]=l.useState(null),[m,k]=l.useState(""),[x,h]=l.useState("pdf"),[c,r]=l.useState(null),[I,f]=l.useState(""),[ee,M]=l.useState(null),[F,u]=l.useState(!1),[z,j]=l.useState(!1),[g,p]=l.useState(""),[L,b]=l.useState(!1),s=V(X),E=[{id:"onboarding_offboarding",name:"신규 입사자 가이드"},{id:"company_policies",name:"인사규정"},{id:"others",name:"기타"}],P=async a=>{if(a.length>0){const t=a[0];r(t),h(t.type),r(t.name)}},{getRootProps:R,getInputProps:B,isDragActive:v}=W({onDrop:P,maxFiles:1});l.useEffect(()=>{(async()=>{const t=await G(d);if(C(t),t){const N=t.file.split("/").pop();f(t.name),k(decodeURIComponent(N)),h(N.split(".").pop()),r(t.file),M(E.find(U=>U.id===t.category)),p(t.description)}})()},[d]);const T=()=>o(-1),$=()=>u(!0),y=()=>u(!1),q=async()=>{j(!0);try{const a=await J(d);b(!0)}catch(a){console.error("문서 삭제 중 에러 발생:",a)}finally{j(!1),y()}},H=()=>{b(!1),o(-1)};return i?e.jsx(w,{children:e.jsxs(D,{children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex bg-white max-h-[90vh] rounded-lg shadow-lg overflow-y-auto hide-scrollbar transition-all w-10/12 min-w-[1100px] h-full",children:e.jsx("div",{className:"flex flex-row w-full h-full",children:e.jsx("div",{className:"flex-grow p-8 px-14 overflow-auto border-r-2 border-gray-200",children:e.jsxs("div",{className:"overflow-y-auto max-h-full h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"문서 조회하기"}),e.jsx(n,{text:"뒤로가기",onClick:T})]}),e.jsxs("div",{className:"flex flex-col my-3",children:[e.jsx("h3",{className:"text-l font-semibold mr-4 mb-2",children:"제목"}),s&&s.is_hr_admin?e.jsx(_,{value:I,disabled:!0,onChange:a=>f(a.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 mb-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}):e.jsx("div",{className:"text-xl",children:i.name})]}),e.jsxs("div",{className:"flex flex-col my-3 mb-6",children:[e.jsx("h3",{className:"text-l font-semibold mr-4 mb-2",children:"카테고리"}),s&&s.is_hr_admin?e.jsx(_,{value:i.category==="onboarding_offboarding"?"신규 입사자 가이드":i.category==="company_policies"?"인사규정":"기타",disabled:!0}):e.jsx("div",{className:"text-xl",children:i.category==="onboarding_offboarding"?"신규 입사자 가이드":i.category==="company_policies"?"인사규정":"기타"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-l font-semibold mt-1",children:"파일"}),s&&s.is_hr_admin?e.jsx("div",{className:"bg-gray-100 p-5 mt-5 rounded-lg",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[!c&&e.jsxs("div",{...R(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer ${v?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50"}`,children:[e.jsx("input",{...B()}),v?e.jsx("p",{className:"text-blue-500",children:"파일을 여기에 드랍해주세요."}):e.jsx("p",{className:"text-gray-500",children:"Drag & drop a file here, or click to select a file"})]}),c&&e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-4 bg-white p-4 rounded-lg shadow-md",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:`https://img.icons8.com/color/48/000000/${x}.png`,alt:"doc",className:"w-6 h-6"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>r(null),children:e.jsx(Z,{})})]})})]})}):e.jsx("div",{className:"bg-gray-100 p-5 mt-5 rounded-lg",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[!c&&e.jsx("div",{children:"파일이 없습니다."}),c&&e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-4 bg-white p-4 rounded-lg shadow-md",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:`https://img.icons8.com/color/48/000000/${x}.png`,alt:"doc",className:"w-6 h-6"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m})})]})})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-l font-semibold mt-5 mb-3",children:"문서 내용"}),s&&e.jsx(Q,{value:g,onChange:a=>p(a),readOnly:!0,modules:{toolbar:!1}}),!s&&e.jsx("div",{className:"text-md mt-5",dangerouslySetInnerHTML:{__html:g}})]}),(s==null?void 0:s.is_hr_admin)&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(n,{text:"데이터 삭제",variant:"teams",leftIcon:e.jsx(Y,{}),type:"button",onClick:$})})]})})})})}),F&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"문서 삭제 확인"}),e.jsx("p",{className:"mt-2",children:"이 문서를 정말로 삭제하시겠습니까?"}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx(n,{text:"취소",onClick:y,type:"button",addClass:"mr-2"}),e.jsx(n,{text:"삭제",onClick:q,variant:"teams",type:"button"})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"삭제 완료"}),e.jsx("p",{className:"mt-2",children:"문서가 성공적으로 삭제되었습니다."}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(n,{text:"확인",onClick:H,type:"button"})})]})}),z&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsx(S,{color:"#5d5bd4",size:70,"aria-label":"Saving Spinner","data-testid":"loader"})})]})}):e.jsx(w,{children:e.jsx(D,{children:e.jsx("div",{className:"flex w-full justify-center items-center m-auto w-1/2 h-full p-72",children:e.jsx(S,{color:"#5d5bd4",size:70,"aria-label":"Loading Spinner","data-testid":"loader"})})})})}export{ne as default};
