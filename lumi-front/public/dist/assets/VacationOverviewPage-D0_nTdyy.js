import{j as e,r,S as F,L as S,C,_ as M,U as E,F as N,B as L}from"./index-BvEyhJvC.js";/* empty css                         */import{C as V}from"./modal-CjDEBRy-.js";import{F as $,i as k,a as P,l as T}from"./ko-CerMIrQ9.js";import{a as I,b as O}from"./ptoApi-B4Hepo3o.js";import"./index-D8Hp-Fll.js";const Y=({events:c,handleEventClick:d,getThisMonthPtoList:h})=>e.jsx($,{plugins:[k,P],initialView:"dayGridMonth",height:"100%",events:c,eventClick:d,datesSet:i=>{let o=new Date((i.start.getTime()+i.end.getTime())/2),x=o.getMonth()+1;h(x,o.getFullYear())},eventDidMount:i=>{i.el.style.cursor="pointer"},locale:T,headerToolbar:{left:"prev",center:"title",right:"next"},buttonIcons:{prev:"chevrons-left",next:"chevrons-right"}}),z=Y;function q(){const[c,d]=r.useState(!1),[h,i]=r.useState(null),[o,x]=r.useState([]),[p,g]=r.useState(!0),[_,b]=r.useState([]),w=(t,a)=>{i(t),x(a),d(!0)},v=()=>{d(!1),x([])},j=t=>new Date(t).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),y=async t=>{const a=t.event.startStr,[m,u,n]=a.split("-"),s=await O(m,u,n);if(s){const D=s.employees.map(l=>({employee_id:l.id,name:l.name,profile_url:l.profile_image,department:l.department.name,job_title:l.job_title,start_date:l.start_date,end_date:l.end_date}));w(a,D)}},f=r.useCallback(async(t,a)=>{g(!0);const m=await I(a,t);if(m){const u=m.filter(n=>n.total_count>0).map(n=>({id:n.date,title:`휴가자 ${n.total_count}명`,start:n.date,color:"#8583FD",details:n.employees?n.employees.map(s=>({employee_id:s.id,name:s.name,profile_url:s.profile_image,department:s.department.name,job_title:s.job_title,start:s.start_date,end:s.end_date})):[]}));b(u)}g(!1)},[]);return r.useEffect(()=>{const t=new Date().getFullYear(),a=new Date().getMonth()+1;f(a,t)},[f]),e.jsx(F,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[e.jsxs("h2",{children:[e.jsx("span",{className:"text-[#8a8686]",children:"메인 > 근태 관리 >"})," ",e.jsx("span",{className:"font-semibold text-[#20243f]",children:"사내 휴가자 현황"})]}),e.jsxs("h2",{className:"flex",children:[e.jsx("span",{children:e.jsx(C,{className:"text-gray-500 h-[20px]"})}),e.jsx("span",{className:"text-gray-500 ml-2 text-[14px]",children:"업무 외 개인정보 이용 금지"})]})]}),e.jsx("div",{className:"flex justify-center mx-16",children:e.jsx("div",{className:"flex items-center justify-center p-5 w-[65vw] h-[78vh] bg-[#F8F8FF] shadow-xl rounded-xl",children:e.jsxs("div",{className:`w-[60vw] h-[75vh] bg-[#F8F8FF]\r
            border-gray-300 rounded-r-xl`,children:[e.jsx(z,{events:_,handleEventClick:y,getThisMonthPtoList:f}),p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(M,{color:"#5d5bd4",loading:p,size:50,"aria-label":"Loading Spinner","data-testid":"loader"})})]})})}),c&&e.jsx("div",{className:"flex flex-col h-auto",children:e.jsxs(V,{isOpen:c,closeModal:v,title:`${j(h)} 휴가자 목록`,className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:[e.jsx("ul",{children:o.map(t=>e.jsx("li",{children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-8 w-8 mr-4",children:e.jsx(E,{userProfileImg:t.profile_image,userName:t.name})}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"mb-0",children:[e.jsx("span",{className:"text-sm mr-2",children:t.name}),e.jsxs("span",{className:"text-xs text-gray-400",children:[e.jsx("span",{className:"mr-1",children:t.job_title}),e.jsx("span",{className:"mr-1",children:"·"}),e.jsx("span",{children:t.department})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"h-3 w-3 mr-2"}),`휴가 시작일 : ${j(t.start_date)}`]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"h-3 w-3 mr-2"}),`휴가 종료일 : ${j(t.end_date)}`]})]})]})]})})},t.employee_id))}),e.jsx("div",{className:"flex justify-end pt-3",children:e.jsx(L,{text:"닫기",onClick:v,size:"sm"})})]})})]})})}export{q as default};
